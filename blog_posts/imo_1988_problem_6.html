<!DOCTYPE html>

<html lang="en-GB">

<head>
    <meta charset="utf-8" />
    <meta name="description" content="A Bulgarian thinker and programmer's blog." />
    <meta name="keywords"
        content="portfolio, machine learning, data science, game developer, dimitar sotirov, soti, dimitar, sotirov, C++ developer, programmer, student" />
    <meta name="author" content="Dimitar Sotirov" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500|Roboto:300,400" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../blog.css">
    <link rel="stylesheet" href="https://unpkg.com/xp.css" />
    <title>Notes on IMO's Most Difficult Problem | Soti's Blog</title>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script src="https://www.geogebra.org/apps/deployggb.js"></script>
</head>


<body>
    <link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css">

    <script>
        window.klipse_settings = {
            selector_pyodide: '.language-klipse-pyodide', 
            editor_type: 'html'
        };
    </script>

    <div class="content">
        <div class="header">
            <div class="icon_container">
                <div class="icon">
                    <img class="hills" src="../data/hand.gif">
                    <img class="give_love" src="">
                    <img class="a_portfolio" src="">
                </div>
            </div>
        </div>

        <div class="main">
            <div class="title">
                <a href="../blog.html"><h1>Soti's Blog</h1></a>
            </div>

            <div class="article">
                <div class="header">
                    <div class="title_and_author">
                        <div class="title">
                            <h2>Notes on IMO's Most Difficult Problem</h2>
                        </div>
                        <div class="author">
                            <i><h4>Dimitar Sotirov</h4></i>
                        </div>
                    </div>

                    <div class="dates">
                        <div class="date">
                            <p>13.08.2022</p>
                        </div>
    
                        <div class="edit_date">
                            <p>Last edited 16.08.2022</p>
                        </div>
                    </div>
                </div>

                <div class="content">
                    <p>
 Today I'd like to share the problem which has a reputation of being the hardest ever set on the International Mathematical Olympiad.
 <br/>
 <br/>
 That's some serious business! And... the goal here is not simply to present
 <i>
  a
 </i>
 solution, but to walk you through 3 increasingly-brilliant insights, that give rise to a genius solution, and in the end hopefully make you feel like a better problem-solver, armed with some new... super tools of sorts.
 <br/>
 <br/>
 <br/>
</p>
<p>
 <h4>
  Story
 </h4>
 <br/>
</p>
<p>
 ... It's... about problem 6 from the 1988
 <a href="https://www.imo-official.org/" target="_blank">
  IMO
 </a>
 . I got obsessed over it a few days ago when Numberphile uploaded a video, featuring Zvezdelina Stankova, the only girl to solve the problem at the competition, who shares Emanouil Atanassov's solution, for which he won a special brilliancy award.
 <br/>
 <br/>
 <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube-nocookie.com/embed/NcaYEaVTA4g" title="YouTube video player" width="560">
 </iframe>
 <br/>
</p>
<p>
 <span class="note">
  Btw, both Zvezdelina and Emanouil are Bulgarians, so this resonates with me on even one more dimension.
 </span>
 <br/>
</p>
<p>
 I recommend watching the original video, but here I present a brief overview of the solution Zvezda talks about. My contribution is that I'll highlight and delve more into the interesting problem-solving mathy-some-what-philosophical ideas you can think about...
 <br/>
 <br/>
 <br/>
</p>
<p>
 <h4>
  The Statement
 </h4>
 <br/>
</p>
<p>
 Let $a$ and $b$ be natural numbers, such that $1 + ab$ divides $a^2 + b^2$.
 <br/>
 Prove that
 <br/>
 $$\frac{a^2 +b^2}{1 + ab}$$
 <br/>
 is a perfect square.
 <br/>
</p>
<p>
 <span class="note">
  Problem 6, 1988 IMO
 </span>
 <br/>
</p>
<p>
 Note: a perfect square is a number in the form $1^2, 2^2, 3^2, ... n^2$.
 <br/>
 <br/>
 It's genuinely a hard number theory problem. Just to be clear, it asks about specific numbers $a$ and $b$ which, when plugged in the equation, equal a whole number. Now it's easy to see that's not always the case. In fact, most of time the result is going to be a fraction. The problem says that we don't care about those cases ("Throw them to the dogs!", as a Math teacher used to tell us).
 <br/>
</p>
<p>
 $$\frac{6^2 +3^2}{1 + 6*3} = \frac{693}{19}$$
 <br/>
 <span class="note">
  No good, we don't bother further with this.
 </span>
 <br/>
</p>
<p>
 The ratio seems so important that we naturally might give it a letter, for example $r$. What is not obvious at all is why does $r$ (when it happens to be a whole number) necessarily has to be a perfect square?
 <br/>
 <br/>
 Now, you are not at the IMO, there's no time pressure. You are at home maybe. Perhaps, grab out a pen and a piece of paper to follow along.
 <br/>
 <br/>
 ...
 <br/>
 <br/>
 Where to start?
 <br/>
 <br/>
 To reassure yourself the problem even makes sense, imagine trying to find a triplet of $a$, $b$ and $r$ which satisfies the condition.
 <br/>
 <br/>
 You might even write a quick program so the computer does the hard work for you.
 <br/>
</p>
<pre><code class="language-klipse-pyodide">
import math
for a in range(1, 200):
  for b in range(1, 200):
    r = (a**2 + b**2) / (1 + a * b)
    if r.is_integer():
      r = int(r)
      #print(f"Found a, b = {a}, {b}, r = {r}")

</code></pre>
<p>
 <span class="note">
  Try to remove the '#' from the print statement in the code box above. It's interactive!
 </span>
 <br/>
</p>
<p>
 Eventually you might stumble upon a solution like $(a, b) = (112, 30),\ r = 4$.
 <br/>
 <br/>
 When doing Math sometimes numbers are completely left-out! So it's always nice to have a concrete example on the side when working on abstract problems such as this one.
 <br/>
 <br/>
 Now back to the equation. If you look closely, it might look at you back with a sort of beautiful symmetry: it doesn't matter if $a$ is $a$ and $b$ is $b$. They can switch places!
 <br/>
 <br/>
 $$r = \frac{a^2 + b^2}{1 + ab} = \frac{b^2 + a^2}{1 + ba}$$
 <br/>
 <br/>
 Before and after - it's the same statement. So that implies that any solution we find also has a twin. So from the earlier example $(a, b) = (30, 112),\ r = 4$ is also a solution.
 <br/>
 <br/>
 <br/>
</p>
<p>
 <h4>
  ...constants, parameters and variables?
 </h4>
 <br/>
</p>
<p>
 There are
 <b>
  3
 </b>
 unknowns here, so you might get stumbled and think - there's nothing much to do with rearranging
 <b>
  one
 </b>
 equation without having more information beforehand - without having something to constrain it.
 <br/>
 <br/>
 And that's a very good intuition! A very good rule of thumb in Math is that if you have 3 variables, to solve for them, you need 3 equations. You can think of it as if one equation "locks" in a relationship between one of the variables and the rest.
 <br/>
 <br/>
 I remember in high-school when there was a geometry problem which also required algebra I would sometimes get stuck rearranging equations, finding the same ratios between variables over and over again, because I was trying to solve for e.g. 3 variables, by having only 2 equations (or two geometrical constraints).
 <br/>
 <br/>
 <br/>
 $$ \left\{
 <br/>
 \begin{array}{ll}
 <br/>
 3x^2+y+z = 10\\
 <br/>
 \frac{1}{1+e^{-x}}=3y\\
 <br/>
 \frac{z}{x+y}=2
 <br/>
 \end{array}
 <br/>
 \right.$$
 <br/>
</p>
<p>
 ... Don't worry, we are not going to solve this monster. That's not important here. But take a look at the third line, we can instantly get $z = 2(x+y)$. If we substitute our newfound information about $z$ in the first line, we'll get something like: $3x^2 + y + 2(x+y) = 10$. We've eliminated one variable! Bingo!
 <br/>
 <br/>
 Now we can solve for either x or y (eliminating one more variable), and then use the second line to finally arrive at a solution. After that we back-track to all the relationships till we get a triplet $(x, y, z)$, which is a solution to the whole system. We might get 0 solutions, infinitely many, or a couple, but the method is the same.
 <br/>
 <br/>
</p>
<p>
 <span class="note">
  Not every equation can have one of variables isolated on one side-though, so this can sometimes fail, just be careful!
 </span>
 <br/>
</p>
<p>
 This however, is not the route we're going to take with the IMO problem.
 <br/>
 <br/>
 You might've learned about letters in Math - how they can represent constants (like $\pi$, $\phi$, ...), parameters ($a$, $b$, $c$, ...) or variables ($x$, $y$, $z$, ...) but these are just conventions, which can be shifted. Nothing stops us from using $x$ as a constant and $\phi$ as a variable, for example.
 <br/>
 <br/>
 Moreover, how "variable" something is - is entirely context dependent! We are used to thinking variables change "more often" than parameters which by themselves change more often than constants.
 <br/>
 <br/>
 "We build up our mental representation of a situation layer by layer. The lowest layer establishes the deepest aspect of the context - sometimes being so low that it cannot vary at all. For instance, the three-dimensionality of our world is so ingrained that most of us never would imagine letting it slip mentally. It is a constant constant."
 <br/>
 - Douglas Hofstadter, "Gödel, Escher, Bach"
 <br/>
 <br/>
 Parameters play the role of a "something between a variable and a constant" type. For a clear example let's see the following graph:
 <br/>
 <br/>
 <div id="ggb-plot-variables">
 </div>
 <br/>
</p>
<p>
 <span class="note">
  This is a plot of $y=ax^2+x-1$. The graph is the result as we let $x$ "vary" over the real number line. So it makes sense to fix the parameter $a$ (imagine the mess if for each different number of the $x$ axis, a different $a$ was chosen!). But if you play with it, $a$ is also "variable" in the sense that, for different values of it, a different problem all together is graphed. $a$ is "variable" on another level, a higher-level. The constant $-1$ in the equation is even more fixed than $a$.
 </span>
 <br/>
</p>
<p>
 I hope you've seen how "wavy" and almost artificial the definition of parameters and variables is. Most people out off from high-school thinking that just because something is called $x$, it must be a variable, $a$ must be a parameter (whatever that means).
 <br/>
 <br/>
 In the context of Machine Learning we can often talk about parameters, and then hyper-parameters, which are another level "up" the hierarchy of "variability". But that's just a note that there can be more than three levels. In reality it's entirely dependent on context.
 <br/>
 <br/>
 <br/>
</p>
<p>
 <h4>
  First Insight: Promote $r$ to a parameter
 </h4>
 <br/>
</p>
<p>
 As Zvezda says in the video, doing this is something non-trivial. You don't just casually go around in problems, fixing one of the variables to a parameter. But in this case it just so happens this is a really productive way to crack the problem.
 <br/>
 <br/>
 For example's sake, let's fix it as $4$.
 <br/>
 <br/>
 $$\frac{a^2 +b^2}{1 + ab} = r\ \ (r = 4)$$
 <br/>
 <br/>
 <p>
  <span class="note">
   <br/>
   We'll still use $r$ as a letter, in the sense that it's not really fixed, but in the back of your head you can just say "$r$ is $4$" for when you want to jump down to the variable level.
  </span>
  <br/>
 </p>
 <p>
  Now we have an equation with 2 unknowns (better than 3!). If you think about for a bit, this means that we can find a relation between $a$ and $b$. And that's exactly how the proof goes on!
  <br/>
  <br/>
  $$\frac{a^2 +b^2}{1 + ab} = r $$
  <br/>
  $$a^2 +b^2 = r(1 + ab) $$
  <br/>
  $$a^2 +b^2 = r + rab $$
  <br/>
  <br/>
  Since $a$ and $b$ are symmetric, we can choose either:
  <br/>
  <br/>
  $$a^2 - (rb)a + b^2 - r = 0 $$
  <br/>
  <br/>
  ... and finally we get a quadratic equation (in terms of $a$). To hopefully bring it back to more familiar land, Zvezda substitutes $x$ for $a$:
  <br/>
  <br/>
  $$x^2 - (rb)x + b^2 - r = 0 $$
  <br/>
  <br/>
  You can jump in now and use the quadratic formula to solve for $x_1$ and $x_2$ (we know there are exactly 2 solutions), but there is a shortcut: Vieta's formulas.
  <br/>
  <br/>
  $$x_1 + x_2 = -\frac{b}{a},\ x_1x_2 = \frac{c}{a}$$
  <br/>
  <p>
   <span class="note">
    <br/>
    Here $a$, $b$ and $c$ are the coefficients of the quadratic equation. You can prove these formulas yourself, but since they are pretty well-known (and usually taught in Math class) the proof uses them directly as given.
   </span>
   <br/>
  </p>
  <p>
   In our example:
   <br/>
   <br/>
   $$x_1 + x_2 = rb$$
   <br/>
   $$x_2 = rb - x_1$$
   <br/>
   <br/>
   But what this says is that if we substitute $rb - x_1$ (remember $x$ = $a$) in the original:
   <br/>
   <br/>
   $$\frac{(a_1)^2 + b^2}{1 + a_1b} = r $$
   <br/>
   <br/>
   We'd also get a solution!
   <br/>
   <br/>
   $$\frac{(a_2)^2 + b^2}{1 + a_2b} = \frac{(rb - x_1)^2 + b^2}{1 + (rb - x_1)b} = r $$
   <br/>
   <br/>
   The top side of the fraction is always positive, $r$ is positive, so the bottom must be as well. What this leaves is with is that $1 + a_2b$ must be positive as well. Or that $a_2$ is at most 0.
   <br/>
   <br/>
   Hold on. What did we just do? We used the original fraction, transformed it into a quadratic equation, found a twin solution $a_2$ to the original $a$ (or $a_1$), and we've shown it must be nonnegative. It must also be an integer! Why? (Can you think of a reasoning for homework? It's again - by using the original fraction.)
   <br/>
   <br/>
   Overall, if we have a pair $(a, b)$ for which we know is a solution. Then we've shown that $(rb - a, b)$ must also be a solution, where $rb - a$ can potentially be zero (and that's what we'll tackle now!).
   <br/>
   <br/>
  </p>
  <p>
   <h4>
    Second Insight: Can 0 be a solution?
   </h4>
   <br/>
  </p>
  <p>
   If you were especially thoughtful in the beginning when searching for a pair $(a, b)$ for which $r$ is a perfect square, you might have wondered, what if one of the numbers is zero?
   <br/>
   <br/>
   $$\frac{a^2 + 0^2}{1 + a*0} = r $$
   <br/>
   <br/>
   Then we get directly:
   <br/>
   <br/>
   $$\frac{a^2}{1} = a^2 = r $$
   <br/>
   <br/>
   So $r$ indeed is a perfect square for any pair $(a, 0)$ (or $(0, b)$ as we saw - they are symmetric).
   <br/>
   <br/>
   But the question statement is very stubborn in that regard - it specifically says $a$ and $b$ must be natural numbers.
   <br/>
  </p>
  <p>
   <span class="note">
    <br/>
    Sometimes natural numbers are defined to include 0. In Bulgaria that's not usually the case. Actually, in the Olympiad statement the term "positive integers" is used to avoid confusion.
   </span>
   <br/>
  </p>
  <p>
   So $0$ doesn't seem to work. But... do we care? If we prove that it works for all non-negative numbers ($0$, $1$, $2$, $3$...), then logically it follows that it's also proven for just positives ($1$, $2$, $3$...). You might think "isn't it more difficult to prove a more general statement, though?" And more often than not - that's the case! However, this is one of the rare cases when it turns out to be easier to prove more, than to prove less.
   <br/>
  </p>
  <p>
   <span class="note">
    <br/>
    Perhaps the authors of the question have anticipated this and it turn deliberately made the question more difficult by stating it in a more specific manner.
   </span>
   <br/>
  </p>
  <p>
   How? Let's see.
   <br/>
   <br/>
   The analysis in the previous section about the twin roots: $a_2 = rb - a_1$, can be applied to $b$ as well! (Remember that the original equation is symmetric in terms of $a$ and $b$). This means that $b_2 = ra - b_1$.
   <br/>
   <br/>
   What if we start with a pair like $(30, 8)$. This is a solution and gives $r = 4$. By applying the formula we find: $a_2 = 4 * 8 - 30 = 2$. So our new pair (which is also a solution) is $(2, 8)$. Look at that! It's simpler. But is that always the case?
   <br/>
   <br/>
   What if we started with $b$: $b_2 = 4 * 30 - 8 = 112$. So new pair is $(30, 112)$. Hmm.. can you see the pattern? Play with it more if you want you.
   <br/>
   <br/>
   Seems like if we start with the higher number, we get a more complicated result. So... easy, just always pick the lower number!
   <br/>
   <br/>
   By this logic $(2, 8)$ then becomes $b_2 = 4 * 2 - 8 = 0$... or $(2, 0)$. AH! A zero. This is forbidden, or is it? Do you remember what we said about proving something more general in order to prove something more specific?
   <br/>
   <br/>
   In this case we got a whole family of solutions: $...$, $(30, 112)$, $(30, 8)$, $(2, 8)$, and $(2, 0)$. And you can continue this to infinity by going up - choosing the larger number! AND you can flip $a$ and $b$ to get.. double more infinitely many solutions.
   <br/>
   <br/>
   <br/>
  </p>
  <p>
   <h4>
    Releasing $r$
   </h4>
   <br/>
  </p>
  <p>
   But... the implications here are even larger. You can start with ANY pair $(a, b)$, and by choosing the lower number
   <i>
    it seems like
   </i>
   you will eventually reach $0$. When you do, the equation becomes in the form:
   <br/>
   <br/>
   $$\frac{a_n^2 + 0^2}{1 + a_n*0} = a_n^2 = r $$
   <br/>
   <br/>
   or
   <br/>
   <br/>
   $$\frac{b_n^2 + 0^2}{1 + b_n*0} = b_n^2 = r $$
   <br/>
   <br/>
   Where $n$ is an arbitrary however-many-it-takes number of steps. And here, at the final step - we can know $r$. If you want later you can go back up the stairs (remember $r$ stays fixed for one family of ladder solutions) and see the original randomly chosen pair $(a, b)$ must also give a ratio which is a perfect square!
   <br/>
   <br/>
   And voila! It's a pretty convincing reasoning. Not really technical (which we'll fix shortly). But intuitive, I hope.
   <br/>
   <br/>
   You might wonder what will happen if after taking a step, one of the numbers goes into the negative realm - then everything will break and we'll never reach zero. But worry not - it's actually impossible for a number to go negative after flip-flopping. It will eventually at most go to 0. Why? We answered that earlier in the section where we found the formula for $a_2$ in the first place. In general it turned out that the twin root must be nonnegative - in order to conform with the original expression. If it's necessary, go up and think through it again to reassure yourself that's the case.
   <br/>
   <br/>
   Also go back to appreciate what we did with $r$. We fixed it as a parameter in order to be able to look at concrete fixed "sub-problems", but still let ourselves a backdoor of sorts - now when the time came, we reasoned about $r$ as if we didn't know it's value at all.
   <br/>
   <br/>
   <br/>
  </p>
  <p>
   <h4>
    Third Insight: The Power of Induction ✨
   </h4>
   <br/>
  </p>
  <p>
   The elephant in the room of the first paragraph of the previous section is: "...
   <i>
    it seems like
   </i>
   you will eventually reach $0$". Well, when doing technical proofs "it seems like" is not really enough. You have to formalize it. Here we'll take time to think about how we use
   <i>
    induction
   </i>
   all over our daily lives without realizing it.
   <br/>
   <br/>
   @TODO: The axiom of induction and why you might not agree with it...
   <br/>
   <br/>
   <br/>
  </p>
  <p>
   <h4>
    Conclusion
   </h4>
   <br/>
  </p>
  <p>
   I hope I've shown you how 3 clever insights can work together to create a beautiful solution to the question which still holds reputation of being one of the hardest ever set on the IMO. It's one of few times competitive Math has sparked research into a topic - now known as proof by "Vieta" jumping, if you want to explore it more.
   <br/>
   <br/>
   The key takeaway here is not the solution to the problem itself. What I found most interesting is how counter-intuitive are some of the steps taken. I wanted to share in details something of their nature, and who knows - maybe these will be incredibly useful to a problem you and I try to solve the future.
   <br/>
   <br/>
   By thinking about it conceptually I'd bet you can apply them to real life as well. (Who says Math is all amount scribbles on paper!)
   <br/>
   <br/>
  </p>
  <p>
   <span class="note">
    <br/>
    So many thoughts... endless, re-lease. yYour mind...
   </span>
   <br/>
  </p>
  <p>
   Anyway, hope you enjoyed, bye for now &lt;3.
   <br/>
   <br/>
   <br/>
   <br/>
   <br/>
   <br/>
  </p>
 </p>
</p>
                </div>
            </div>
        </div>

        <div class="footer">
            Gif in header, owner -
            <a href="https://artoftheglitch.tumblr.com" target="_blank">artoftheglitch.tumblr.com</a><br><br>
            © 2022 – Dimitar Sotirov
        </div>
    </div>

    <script src="https://storage.googleapis.com/app.klipse.tech/plugin_prod/js/klipse_plugin.min.js"></script>

    <script>  
        var ggb_plot_variables = new GGBApplet({"material_id": "phrs5jkc", "width": 614, "height": 300, "showToolBar": false, "showAlgebraInput": false, "showMenuBar": false }, true);  

        window.addEventListener("load", function() { 
            ggb_plot_variables.inject('ggb-plot-variables');
        });
    </script>

</body>

</html>